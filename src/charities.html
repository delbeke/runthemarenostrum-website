<html>

<head>
  <!-- build:header -->
  <!-- endbuild -->
  <title>Run The Mare Nostrum</title>
  <link rel="stylesheet" type="text/css" href="/css/charities.css">
  <script src="https://checkout.stripe.com/checkout.js"></script>
</head>

<body>
  <!-- build:menu -->
  <!-- endbuild -->
  <section class='slide hero'>
    <div class='left'>
      <div class='catchphrase'>
        <div>Charities</div>
      </div>
    </div>
  </section>
  <section class='slide panel panel-1'>
    <div class='content'>
      <div class='title'>Charities we support</div>
      <div class='description'>
        <p>
          Please find below our Charity partners who fight for causes - mental, physical or environmental - we feel
          closely related
          to. Click on a charity to discover more.
        </p>
      </div>
    </div>
  </section>
  <section class='slide panel item-container'>

    <div id="tout-bien" class="item">
      <button type="button" id="donate-tout-bien">Donate</button>
      <div class="item-default">
        <div class="logo" style="background-image: url(images/charities/logo-hey-hoe-gaat-het-nl.jpg)"></div>
        <div class="name"><div>Tout Bien</div></div>
        <div class="label">Mental</div>
      </div>
      <div class="item-hover" style="display:none;">
        <div class="name">Tout Bien</div>
        <div class="social">
            <a href="http://www.heyhoegaathet.be" target="_blank"><i class="im im-globe"></i></a>
            <a href="mailto:info@heyhoegaathet.be" target="_blank"><i class="im im-mail"></i></a>
            <a href="https://www.facebook.com/toutbienokidoki/" target="_blank"><i class="im im-facebook"></i></a>
        </div>
        <div class="address">Maaltemeers 84, 9051 Gent België</div>
        <hr>
        <div class="info">
          <div class="description">
            <div class="subtitle">Who are we?</div>

            Belgium is among the top 3 countries in terms of suicide numbers, even being the runner-up after Poland.
            In 2014, every single day 3 people died each ending their life. Suicide is the Nr 1 cause of dead amongst
            young
            people in Belgium. The iniative 'Hey hoe gaat het?' (Hi how are you doing?) of the non-for-profit “Tout Bien
            –
            Okidoki” wants to create awareness around this problem and aims to prevent suicide especially amongst young
            people.
            With this initiative they want to break the taboo around the subject of suicide that is still dominant in our
            modern society. They focus on making the subject addressable and aim to create better ways of counseling and
            care.
          </div>
          <div class="purpose"></div>
        </div>
      </div>
    </div>

    <div id="plasticsoupsurfer" class="item">
      <button type="button" id="donate-plasticsoupsurfer">Donate</button>
      <div class="item-default">
        <div class="logo" style="background-image: url(images/charities/surfer.jpg)"></div>
        <div class="name"><div>Plastic Soup Surfer</div></div>
        <div class="label">Environmental</div>
      </div>
      <div class="item-hover" style="display:none;">
        <div class="name">Plastic Soup Surfer</div>
        <div class="social">
            <a href="https://plasticsoupsurfer.org/" target="_blank"><i class="im im-globe"></i></a>
            <a href="mailto:info@plasticsoupsurfer.org" target="_blank"><i class="im im-mail"></i></a>
            <a href="https://www.facebook.com/Plasticsoupsurfer/" target="_blank"><i class="im im-facebook"></i></a>
            <a href="https://twitter.com/plasticsoupsurf" target="_blank"><i class="im im-twitter"></i></a>
        </div>
        <div class="address">Niek Engelschmanstraat 27 2316 JM Leiden</div>
        <hr>
        <div class="info">
          <div class="description">
            <div class="subtitle">Who are we?</div>

            The Plastic Soup Surfer fights plastic pollution using his surfboard as a weapon. His campaigns combine
            plastic pollution awareness with creativity, innovation and constructive calls to action.
          </div>
          <div class="purpose">
            <div class="subtitle">How will use the money?</div>
            To fund our next expedition and campaign. Our goal is prevention of plastic pollution
            through feasible steps and alternatives in legislation and production.
          </div>
        </div>
      </div>
    </div>

    <div id="properstrandlopers" class="item">
      <button type="button" id="donate-properstrandlopers">Donate</button>
      <div class="item-default">
        <div class="logo" style="background-image: url(images/charities/properstrandlopers.jpg)"></div>
        <div class="name"><div>Proper Strand Lopers</div></div>
        <div class="label">Environmental</div>
      </div>
      <div class="item-hover" style="display:none;">
        <div class="name">Proper Strand Lopers</div>
        <div class="social">
            <a href="https://www.properstrandlopers.be/" target="_blank"><i class="im im-globe"></i></a>
            <a href="mailto:properstrandlopers@hotmail.com" target="_blank"><i class="im im-mail"></i></a>
            <a href="https://www.facebook.com/groups/properstrandlopers/" target="_blank"><i class="im im-facebook"></i></a>

        </div>
        <hr>
        <div class="info">
          <div class="description">
            <div class="subtitle">Who are we?</div>
            Proper Strand Lopers is a civilian waste disposal doctrine that encourages people to voluntarily clean our
            environment. Every member can post pictures in the group. When posting a picture of the collected waste,
            people are
            encouraged to act the same way. This concept works! Since the foundation of the group in September 2016 we
            have disposed tons of litter from our environment,
            mostly beaches. With an average of 5 actions a day individuals do cleanups. All the effort of these
            individuals can be
            followed in our group. We also organise group cleanups every month.

            Our group interacts with governments and politicians, cooperates with monitoring programs and other
            environmental initiatives, launches proposals
            and makes files on how to reduce waste that washes ashore.
            We have a more than 3.500 members and the amount is rising everyday.
          </div>
          <div class="purpose">
            <div class="subtitle">How will use the money?</div>
            More than 90% of the waste washing ashore consists of plastics. We are developping a project where we use the
            plastic waste we collect as a raw material to make new objects. Therefor we need funds to construct a
            workplace and buy machinery to shred and melt thermoplastics into new functional objects. Our target audience
            are young children with whom we will clean beaches, educate about our global plastic addiction and litter
            problem.
          </div>
        </div>
      </div>
    </div>

    <div id="libertyhome" class="item">
      <button type="button" id="donate-libertyhome">Donate</button>
      <div class="item-default">
        <div class="logo" style="background-image: url(images/charities/libertylogo.png)"></div>
        <div class="name"><div>Liberty Home Addiction Care</div></div>
        <div class="label">Mental</div>
      </div>
      <div class="item-hover" style="display:none;">
        <div class="name">Liberty Home Addiction Care</div>
        <div class="social">
            <a href="http://www.libertyhome.co.za" target="_blank"><i class="im im-globe"></i></a>
            <a href="mailto:morgane.vercruysse@gmail.com" target="_blank"><i class="im im-mail"></i></a>
        </div>
        <hr>
        <div class="info">
          <div class="description">
            <div class="subtitle">Who are we?</div>
            Liberty home is a recovery-based home situated in Lakeside beach in
            Cape Town. We specialize in the reintegration of people afflicted with
            addiction back into society. Liberty home is for those people who
            have somehow lost themselves along the way because of addiction
            (narcotics, alcohol, sex, gambling, and eating disorder. We offer a
            tranquil setting, which is based upon reigniting your passion for life and
            all that it holds for you.
            The hosts of the house are a young couple who once were controlled by
            the grips of addiction. Our understanding and compassion with people
            suffering from this disease is unparalleled. Recovery is a symptom of action,
            using is a symptom of inaction. We understand that addiction is a disorder
            caused by repeated behaviors as well as a mental predisposition. Therefore,
            in order to effectively combat it, new reward pathways must be established
            by new habits. We are strong believers that recovery can be fun and that
            life does continue. ‘It’s not always easy, but it’s worth it’
          </div>
          <div class="purpose">
            <div class="subtitle">How will use the money?</div>
            People that suffer with the disease of addiction and have reached their rock
            bottom don’t have the financial capacity to afford treatment in a rehabilitation
            centre, such as Liberty Home. These people are often the ones who need it the
            most. Every month we in Liberty Home take in two people in our house that we sponsor (they don’t have to pay for
            accommodation, nor catering and treatment). We would use the money
            raised by charity to continue sponsor people for treatment.
          </div>
        </div>
      </div>
    </div>

    <script>
      var onToggle = function (evt) {
        var innerDivs = evt.currentTarget.children
        for (let i = 0; i < innerDivs.length; i++) {
          const div = innerDivs[i];
          if (div.style.display === 'none') {
            div.style.display = 'block'
          } else {
            div.style.display = 'none'
          }
        }
      }
      document.getElementById('tout-bien').addEventListener('click', onToggle);
      document.getElementById('plasticsoupsurfer').addEventListener('click', onToggle);
      document.getElementById('properstrandlopers').addEventListener('click', onToggle);
      document.getElementById('libertyhome').addEventListener('click', onToggle);
    </script>
  </section>

  <section id="dlgDonate" class="donate-popup" style="display:none;">
    <div class="popup-inner">
      <div id='txtCharityName'>...</div>
      <span class="close" aria-label="Close"></span>
      <div>
          <div class="form-row">
            <div>The stage you like to associate with your donation:</div>
            <label for="ddStages">Stage:</label>
            <select id="ddStages"></select>
          </div>
          <div class="form-row">
            <div>The amount you would like to donate:</div>
            <label for="txtAmount">Amount:</label>
            <input type="text" id="txtAmount">
            EURO
          </div>
          <div class="form-row-submit">
            <button id="btnDonate" disabled>Donate!</button>
            <p>Payment will be processed by Stripe.</p>
          </div>
      </div>
    </div>
  </section>

  <section id="dlgThanks" class="donate-popup" style="display:none;">
    <div class="popup-inner">
      <div>Thank You!</div>
      <div>
          <div class="form-row">
            <div>
                Thank you for your contribution. Your support means a lot to us.
                Mare Nostrum will send your support to the specified charity shortly.
            </div>
          </div>
          <div class="form-row-submit">
            <button id="btnBye">Ok</button>
          </div>
      </div>
    </div>
  </section>


  <section id="dlgWireTransfer" class="donate-popup" style="display:none;">
    <div class="popup-inner">
      <div>Wire Transfer?</div>
      <span class="close" aria-label="Close"></span>
      <div>
          <div class="form-row">
            <div>
                Because you are willing to donate more than 250 euros we kindly ask you to wire transfer the amount.
                You can still pay via stripe, but please be aware we have to pay a commission to them.
            </div>
            <div>
                IBAN: BE37 0688 9849 1728
            </div>
            <div id="txtInstructions">

            </div>
          </div>
          <div class="form-row-submit">
            <button id="btnManual">Manual Transfer</button>
            <button id="btnStripe">Still use Stripe</button>
          </div>
      </div>
    </div>
  </section>

  <script>
    var $id = function (id) {  return document.getElementById(id) }
    var $qs = function (qs) {  return document.querySelector(qs) }

    var ApiBaseUrl = 'https://api.runthemarenostrum.com'

    var dlgDonate = $id("dlgDonate")
    var txtCharityName = $id("txtCharityName")
    var dlgWireTransfer = $id("dlgWireTransfer")
    var dlgThanks = $id("dlgThanks")

    var ddStages = $id("ddStages")
    var txtEmail = $id("txtEmail")
    var txtAmount = $id("txtAmount")
    var txtInstructions = $id("txtInstructions")
    var btnDonate = $id("btnDonate")
    var btnManual = $id("btnManual")
    var btnStripe = $id("btnStripe")
    var btnBye = $id("btnBye")

    var amount = 0
    var selectedStage = ''
    var charityName = ''

    function parseDate (d) {
      var parts = d.split('-')
      return new Date(parts[2], parts[1], parts[0])
    }

    function getJson (url, cb) {
      var oReq = new window.XMLHttpRequest()
      oReq.addEventListener('readystatechange', function (data) {
        if (this.readyState === 4 && this.status === 200) {
            cb(JSON.parse(this.responseText))
        }
      })
      oReq.open('GET', ApiBaseUrl + url)
      oReq.send()
    }

    function postJson(url, data, cb) {
      var oReq = new window.XMLHttpRequest()
      oReq.addEventListener('readystatechange', function (data) {
        if (this.readyState === 4 && this.status === 200) {
            cb(JSON.parse(this.responseText))
        }
      })
      oReq.open('POST', ApiBaseUrl + url)
      // TODO: send data
      oReq.send()
    }

    // fill dropdown with stages
    getJson('/stages/', function (stages) {
      stages.sort(function(s1, s2) {
        return parseDate(s1.startDate) - parseDate(s2.startDate)
      })
      for (var i = 0; i < stages.length; i++) {
        var stage = stages[i]
        var itemNode = document.createElement('option')
        itemNode.textContent = stage.stageId
        itemNode.value = stage.stageId
        ddStages.appendChild(itemNode)
      }
    })


    var handler = StripeCheckout.configure({
      key: 'pk_test_bHvaIan6p9c0QrwIbqRQorss',
      /*image: 'https://stripe.com/img/documentation/checkout/marketplace.png',*/
      locale: 'auto',
      token: function(token) {
        postJson(ApiBaseUrl + '', {

        }, function () {
          dlgThanks.style.display = 'block'
        })
      }
    })

    var openStripe = function (amount) {
      handler.open({
          name: 'runthemarenostrum.com',
          description: 'Donation',
          zipCode: true,
          amount: (amount * 100)
        });
    }

    btnDonate.addEventListener('click', function (e) {
      dlgDonate.style.display = 'none'
      amount = parseInt(txtAmount.value)
      selectedStage = ddStages.options[ddStages.selectedIndex].value
      if (amount > 250) {
        dlgWireTransfer.style.display = 'block'
        txtInstructions.textContent = 'Instructions: "STAGE ' + selectedStage + ', ' + charityName + '"'
      } else {
        openStripe(amount)
      }
      e.preventDefault();
    })

    btnManual.addEventListener('click', function () {
      dlgWireTransfer.style.display = 'none'
      dlgThanks.style.display = 'block'
    })

    btnStripe.addEventListener('click', function () {
      dlgWireTransfer.style.display = 'none'
      openStripe(amount)
    })

    btnBye.addEventListener('click', function () {
      dlgThanks.style.display = 'none'
      amount = 0
    })

    var onAmountChange = function (e) {
      this.value = this.value.replace(/[^\d]/,'')
      if (parseInt(this.value) > 0) {
        btnDonate.removeAttribute('disabled')
      } else {
        btnDonate.setAttribute('disabled', 'disabled')
      }
    }

    txtAmount.addEventListener('keyup', onAmountChange)
    txtAmount.addEventListener('blur', onAmountChange)
    txtAmount.addEventListener('paste', onAmountChange)

    $qs('#dlgDonate .close').addEventListener('click', function () {
      dlgDonate.style.display = 'none'
      amount = 0
    })

    $qs('#dlgWireTransfer .close').addEventListener('click', function () {
      dlgWireTransfer.style.display = 'none'
      amount = 0
    })

    // wire up the buttons
    /*
    document.getElementById('donate-tout-bien').addEventListener('click', function (evt) {
      evt.preventDefault()
      txtCharityName.innerHTML = 'Tout Bien'
      charityName = 'tout-bien'
      dlgDonate.style.display = 'block'
    });

    document.getElementById('donate-plasticsoupsurfer').addEventListener('click', function (evt) {
      evt.preventDefault()
      txtCharityName.innerHTML = 'Plastic Soup Surfer'
      charityName = 'plasticsoupsurfer'
      dlgDonate.style.display = 'block'
    });

    document.getElementById('properstrandlopers').addEventListener('click', function (evt) {
      evt.preventDefault()
      txtCharityName.innerHTML = 'Proper Strand Lopers'
      charityName = 'properstrandlopers'
      dlgDonate.style.display = 'block'
    });

    document.getElementById('libertyhome').addEventListener('click', function (evt) {
      evt.preventDefault()
      txtCharityName.innerHTML = 'Liberty Home'
      charityName = 'libertyhome'
      dlgDonate.style.display = 'block'
    });
    */
  </script>

  <!-- build:footer -->
  <!-- endbuild -->
</body>

</html>
